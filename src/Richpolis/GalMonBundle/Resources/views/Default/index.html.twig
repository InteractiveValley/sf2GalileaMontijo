{% extends 'RichpolisGalMonBundle::layout.html.twig' %}

{% block stylesheets %}
{{ parent() }}
<link rel="stylesheet" href="{{ asset('css/prettyPhoto.css') }}" type="text/css" media="all" />
<link rel="stylesheet" href="{{ asset('css/galleriffic-2.css') }}" type="text/css" media="all" />
<link rel="stylesheet" href="{{ asset('css/modal.css') }}" type="text/css" media="all" />
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script src="{{ asset('js/jquery.prettyPhoto.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/jquery.form.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/sfrichpolis.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/jquery.history.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/jquery.galleriffic.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/jquery.opacityrollover.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/jquery.modal2.js') }}" type="text/javascript"></script>

{% endblock %}

{% block body %}

<section id="home-section-1">
    <article id="video-semana">
          {% render 'RichpolisGalMonBundle:Default:videoSemana' %}   
    </article>
        
    <article id="twitter-feed">
        {% include 'RichpolisGalMonBundle:Default:twitter.html.twig' with {'twitterName': 'GalileaMontijo','twitterDescripcion':'Galilea Montijo'} %}
    </article>    
        
    <article id="lo-que-estoy-viendo">
        <h1 style="font-family: 'oswaldregular'; font-size: 22pt;"  class="color-azul-3">Lo que estoy viendo!</h1>
        {% for categoria in categorias %}
            {% if categoria.tipoCategoria == 1 %}
                {% include 'RichpolisGalMonBundle:Default:loQueEstoyViendo.html.twig' with {'categoria': categoria,'galerias':categoria.galerias} %}
            {% endif %}
        {% endfor %}
    </article>
        
    <article id="media-kit-1" class="media-kit">
        {% for publicidad in publicidades %}
            {% if publicidad.tipoPublicidad == 1%}
            <div style="width: 100%; text-align: center; margin-top: 30px;">
                {{ publicidad.archivoView | raw }} 
            </div>
            {% endif %}
        {% endfor %}    
    </article>    
        
</section>

<section id="home-section-2">
    
    <article id="media-kit-2" class="media-kit">
        <h1 style="font-family: 'oswaldregular'; font-size: 22pt;"  class="color-azul-2">Definitivamente esto me encanto!</h1>
        {% for publicidad in publicidades %}
            {% if publicidad.tipoPublicidad == 2%}
            <div style="width: 100%; text-align: center; margin-top: 20px;"> 
                {{ publicidad.archivoView | raw }} 
                <p style="margin-top: 20px; text-align: left; margin-left: 20px;">{{publicidad.link}}</p> 
            </div>
            {% endif %}
        {% endfor %}
    </article>
        
    <article id="decora-tu-pantalla">
        <h1 style="font-family: 'oswaldregular'; font-size: 22pt;"  class="color-azul-4">Decora tu pantalla!</h1>
        {% for categoria in categorias %}
            {% if categoria.tipoCategoria == 2 %}
                {% include 'RichpolisGalMonBundle:Default:decoraTuPantalla.html.twig' with {'categoria': categoria,'galerias':categoria.galerias} %}
            {% endif %}
        {% endfor %}
    </article>
    
</section>

<section id="home-section-3">
    
    <article id="galeria-oficial">
        <h1 style="font-family: 'oswaldregular'; font-size: 22pt;margin-bottom: 0px; text-align: left;" class="color-azul-2">Galeria oficial!</h1>
        {% for categoria in categorias %}
            {% if categoria.tipoCategoria == 3 %}
                {% include 'RichpolisGalMonBundle:Default:galeriaOficial.html.twig' with {'categoria': categoria,'galerias':categoria.galerias} %}
            {% endif %}
        {% endfor %}
    </article>
    
    <div style="clear: both;"></div>
    
    <article id="media-kit-3" class="media-kit">
        <div class="publicidad">
            <ul id="lista-publicidad">
                {% for publicidad in publicidades %}
                    {% if publicidad.tipoPublicidad == 3%}
                    <li class="publicidad-item">
                        {{ publicidad.archivoView | raw }}
                    </li>
                    {% elseif publicidad.tipoPublicidad == 4%}    
                    <li class="publicidad-item" style=" margin-right: 0px;">
                        {{ publicidad.archivoView | raw }}
                    </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    </article>
    
    <div style="clear: both;"></div>
    
</section>

<section id="home-section-4">
    
    <h1 style="font-family: 'oswaldregular'; font-size: 22pt;"  class="color-azul-2" style="margin-bottom: 0px;">Tus fotos!</h1>
    <article id="tus-fotos">
        {% for categoria in categorias %}
            {% if categoria.tipoCategoria == 4 %}
                {% include 'RichpolisGalMonBundle:Default:tusFotos.html.twig' with {'categoria': categoria,'galerias':categoria.galerias} %}
            {% endif %}
        {% endfor %}
     </article>
    
</section>
<section id="home-section-5">
    <h1 style="font-family: 'oswaldregular'; font-size: 22pt;"  class="color-azul-2" style="margin-bottom: 0px;">Sube tu foto y explora las demas! la foto mas votada aparecera en la portada!</h1>
    <article id="foto-mas-votada-semana">
        {% render 'RichpolisGalMonBundle:Default:votaciones' %}   
        {# include 'RichpolisGalMonBundle:Default:votaciones.html.twig' with {'semana': semana } #}
        </article>
        <article id="media-kit-3" class="media-kit">
                <div class="publicidad">
                    <ul id="lista-publicidad">
                        {% for publicidad in publicidades %}
                            {% if publicidad.tipoPublicidad == 5%}
                            <li class="publicidad-item">
                                {{ publicidad.archivoView | raw }}
                            </li>
                            {% elseif publicidad.tipoPublicidad == 6%}
                            <li class="publicidad-item" style=" margin-right: 0px;">
                                {{ publicidad.archivoView | raw }}
                            </li>
                           {% endif %}
                         {% endfor %}
                    </ul>
                </div>
        </article>
        <article id="newsletter">
            
        </article>    
     </section>
<div id="modalUploadForm" data-backdrop="true" tabindex="-1" role="dialog" class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3 id="titulo-form-modal">Subir lo que estas viendo</h3>
  </div>
  <div id="body-form-modal" class="modal-body">
    {# contenido se llena con ajax #}
  </div>
  <div id="footer-form-modal" class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Cerrar</button>
    <button href="#" class="btn btn-primary" data-loading-text="Loading..." onclick="javascript:submitFormUpload();">Subir</button>
  </div>
</div>

{% endblock %}


{% block javascript_adicional %}
       <script>
        $(document).ready(function(){
            $.configPrettyPhoto();
            $(".galeria-control-derecha").css({"visibility":"hidden"});
            $(".galeria-control-izquierda").css({"visibility":"hidden"});
            var $galeriaLoQueEstoyViendo=$("#contenedor-loqueestoyviendo");
            var $galeriaDecoraTuPantalla=$(".contenedor-decora-tu-pantalla");
            var $galeriaGaleriaOficial=$(".contenedor-galeria-oficial");
            var $galeriaTusFotos=$(".contenedor-galeria-tus-fotos");
    
            countGaleria($galeriaLoQueEstoyViendo,4);
            countGaleria($galeriaDecoraTuPantalla,1);
            countGaleria($galeriaGaleriaOficial,6);
            countGaleria($galeriaTusFotos,6);
    
            $galeriaLoQueEstoyViendo.find(".galeria-control-derecha").click(function(){
                galeriaItemDerecha($galeriaLoQueEstoyViendo,100,4);
            });
            $galeriaLoQueEstoyViendo.find(".galeria-control-izquierda").click(function(){
                galeriaItemIzquierda($galeriaLoQueEstoyViendo,100,4);
            });
    
            $galeriaDecoraTuPantalla.find(".galeria-control-derecha").click(function(){
                galeriaItemDerecha($galeriaDecoraTuPantalla,460,1);
            });
            $galeriaDecoraTuPantalla.find(".galeria-control-izquierda").click(function(){
                galeriaItemIzquierda($galeriaDecoraTuPantalla,460,1);
            });
    
    
            $galeriaGaleriaOficial.find(".galeria-control-derecha").click(function(){
                galeriaItemDerecha($galeriaGaleriaOficial,165,6);
            });
            $galeriaGaleriaOficial.find(".galeria-control-izquierda").click(function(){
                galeriaItemIzquierda($galeriaGaleriaOficial,165,6);
            });
    
            $galeriaTusFotos.find(".galeria-control-derecha").click(function(){
                galeriaItemDerecha($galeriaTusFotos,165,6);
            });
            $galeriaTusFotos.find(".galeria-control-izquierda").click(function(){
                galeriaItemIzquierda($galeriaTusFotos,165,6);
            });
        });

        function loadImagenShowLoQueEstoyViendo(imagen){
            $(".imagen-show").fadeOut("fast",function(){
                $(".imagen-show").css({"backgroundImage":"url("+imagen+")"});
                $(".imagen-show").fadeIn("fast");
            });
        }

        function galeriaItemDerecha($lista,valor,indice){
            var $valor=Math.ceil(valor*indice);
            $lista.find("ul").animate({"left":"-="+$valor+"px"},1000);
            visualzarControlesGaleria($lista,1,indice);
        }

        function galeriaItemIzquierda($lista,valor,indice){
            var $valor=Math.ceil(valor*indice);
            $lista.find("ul").animate({"left":"+="+$valor+"px"},1000);
            visualzarControlesGaleria($lista,-1,indice);
        }

        function countGaleria($lista,indice){
            var largo=$lista.find("li.galeria-item").size();
            $lista.attr("largo",largo).attr("indice",indice);
            visualzarControlesGaleria($lista,0,indice);
        }

        function visualzarControlesGaleria($lista,valor,index){
            var indice=parseInt($lista.attr("indice"),10);
            var largo=parseInt($lista.attr("largo"),10);
            if(valor>0){
                indice+=index;
            }else if(valor<0){
                indice-=index;
            }
    
            if(indice>index){
                $lista.find(".galeria-control-izquierda").css({"visibility":"visible"});
            }else{
                $lista.find(".galeria-control-izquierda").css({"visibility":"hidden"});
            }
    
            if(indice<largo){
                $lista.find(".galeria-control-derecha").css({"visibility":"visible"});
            }else{
                $lista.find(".galeria-control-derecha").css({"visibility":"hidden"});
            }
    
            $lista.attr("largo",largo).attr("indice",indice);
        }
        function showFormUpload(url,title){
            closeDialogModalRS();
             $(".modal-body").html('<img src=\"/images/loader.gif\" />');
             $(".modal-body").load(url,function(){
                $("#titulo-form-modal").html(title);
                $("#progressbar").hide("fast");
             });
        }
        function showDialogModalRS(urlPage){
            $().dialogModalRS(urlPage);
        }
        function voto(url,IdHtml){
            $.get(url,{},function(data){
                if(data.ok=="ok"){
                    $(IdHtml).html(data.votacion);
                }
            });
        }
 
</script>

{% endblock %}

